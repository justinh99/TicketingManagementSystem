{"ast":null,"code":"import _objectSpread from \"/Users/seung/Desktop/project/typescript-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/seung/Desktop/project/typescript-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/Users/seung/Desktop/project/typescript-tutorial/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nvar _this = this,\n  _jsxFileName = \"/Users/seung/Desktop/project/typescript-tutorial/src/login.tsx\";\n// Login.js\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './AuthProvider';\nvar Login = function Login() {\n  // State to manage user input\n  var _useAuth = useAuth(),\n    isAuthenticated = _useAuth.isAuthenticated,\n    setIsAuthenticated = _useAuth.setIsAuthenticated;\n  var LoginStatus = function LoginStatus(status, data, description, error) {\n    _classCallCheck(this, LoginStatus);\n    this.status = void 0;\n    this.data = void 0;\n    this.description = void 0;\n    this.error = void 0;\n    this.status = status;\n    this.data = data;\n    this.description = description;\n    this.error = error; // Include this line to set the error property\n  };\n\n  var navigate = useNavigate();\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    loginStatus = _useState2[0],\n    setLoginStatus = _useState2[1];\n  var _useState3 = useState({\n      username: '',\n      // Initialize with an empty string\n      password: '' // Initialize with an empty string\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loginData = _useState4[0],\n    setLoginData = _useState4[1];\n  var username = loginData.username,\n    password = loginData.password;\n  var setLoginCookie = function setLoginCookie(accessToken) {\n    var expirationDate = new Date();\n    expirationDate.setDate(expirationDate.getDate() + 7); // Cookie expiration in 7 days\n\n    document.cookie = \"accessToken=\".concat(accessToken, \"; expires=\").concat(expirationDate.toUTCString(), \"; path=/\");\n  };\n\n  // Handle form submission\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    var login = 'http://localhost:8080/login';\n    var requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(loginData)\n    };\n\n    // Make the API request\n    fetch(login, requestOptions).then(function (response) {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    }).then(function (data) {\n      // Handle the API response data here\n      var loginStatus = new LoginStatus(data.status, data.data, data.description, data.error);\n      setLoginStatus(loginStatus);\n      var accessTokenRow = document.cookie.split('; ').find(function (row) {\n        return row.startsWith('accessToken=');\n      });\n      var accessToken;\n      if (accessTokenRow) {\n        accessToken = accessTokenRow.split('=')[1];\n      }\n      //document.cookie = `token=${data.token}; secure; samesite=strict`;\n      if (accessToken || loginStatus.data === 'succeed') {\n        setLoginCookie(\"token\");\n        setIsAuthenticated(true);\n        navigate('/staffHome'); // Redirect to StaffScreen\n      }\n    }).catch(function (error) {\n      // Handle any errors that occurred during the fetch.\n      console.error('Fetch error:', error);\n    });\n\n    // Add your login logic here\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      textAlign: 'center',\n      flex: '1'\n    },\n    onClick: function onClick() {\n      return navigate(\"/\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, \"ME100\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"username\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Username:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    style: {\n      width: '150px',\n      height: '10px'\n    },\n    value: username,\n    onChange: function onChange(e) {\n      return setLoginData(_objectSpread({}, loginData, {\n        username: e.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, \"Password:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    style: {\n      width: '160px',\n      height: '20px'\n    },\n    value: password,\n    onChange: function onChange(e) {\n      return setLoginData(_objectSpread({}, loginData, {\n        password: e.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    style: {\n      margin: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, \"Login\")), loginStatus && /*#__PURE__*/React.createElement(\"div\", {\n    className: loginStatus.data === 'succeed' ? 'success-message' : 'error-message',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, loginStatus.data === 'succeed' ? 'Login succeeded' : 'Login failed'));\n};\nexport default Login;","map":{"version":3,"names":["React","useState","useNavigate","useAuth","Login","_useAuth","isAuthenticated","setIsAuthenticated","LoginStatus","status","data","description","error","_classCallCheck","navigate","_useState","_useState2","_slicedToArray","loginStatus","setLoginStatus","_useState3","username","password","_useState4","loginData","setLoginData","setLoginCookie","accessToken","expirationDate","Date","setDate","getDate","document","cookie","concat","toUTCString","handleSubmit","e","preventDefault","login","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","ok","Error","json","accessTokenRow","split","find","row","startsWith","catch","console","createElement","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","textAlign","flex","onClick","onSubmit","htmlFor","type","id","width","height","value","onChange","_objectSpread","target","margin"],"sources":["/Users/seung/Desktop/project/typescript-tutorial/src/login.tsx"],"sourcesContent":["// Login.js\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './AuthProvider';\n\nconst Login = () => {\n  // State to manage user input\n\n  const { isAuthenticated, setIsAuthenticated } = useAuth();\n  class LoginStatus {\n    public status: Number ;\n    public data: Object;\n    public description: Object;\n    public error: Object ;\n\n    constructor(status: number, data: any, description: string, error: any) {\n        this.status = status;\n        this.data = data;\n        this.description = description;\n        this.error = error; // Include this line to set the error property\n      }\n  }\n\n  const navigate = useNavigate();\n\n  const [loginStatus, setLoginStatus] = useState<LoginStatus>();\n\n  const [loginData, setLoginData] = useState({\n    username: '', // Initialize with an empty string\n    password: '', // Initialize with an empty string\n  });\n\n  const { username, password } = loginData;\n\n  const setLoginCookie = (accessToken: String) => {\n    const expirationDate = new Date();\n    expirationDate.setDate(expirationDate.getDate() + 7); // Cookie expiration in 7 days\n  \n    document.cookie = `accessToken=${accessToken}; expires=${expirationDate.toUTCString()}; path=/`;\n  };\n\n  // Handle form submission\n  const handleSubmit = (e: { preventDefault: () => void; }) => {\n    e.preventDefault();\n    const login = 'http://localhost:8080/login';\n\n    const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(loginData), \n      };\n  \n  \n      // Make the API request\n    fetch(login, requestOptions)\n    .then((response) => {\n        if (!response.ok) {\n        throw new Error('Network response was not ok');\n        }\n        return response.json();\n    })\n    .then((data) => {\n        // Handle the API response data here\n        const loginStatus = new LoginStatus(\n        data.status,\n        data.data,\n        data.description,\n        data.error\n        );\n        setLoginStatus(loginStatus);\n        const accessTokenRow = document.cookie\n          .split('; ')\n          .find(row => row.startsWith('accessToken='));\n\n        let accessToken;\n        if (accessTokenRow) {\n          accessToken = accessTokenRow.split('=')[1];\n        }\n        //document.cookie = `token=${data.token}; secure; samesite=strict`;\n        if (accessToken || loginStatus.data === 'succeed') {\n            setLoginCookie(\"token\");\n            setIsAuthenticated(true);\n            navigate('/staffHome'); // Redirect to StaffScreen\n        }\n    })\n    .catch((error) => {\n        // Handle any errors that occurred during the fetch.\n        console.error('Fetch error:', error);\n    });\n\n\n\n    // Add your login logic here\n  };\n\n\n\n  return (\n    <div className=\"login-container\">\n      <h1 style={{ textAlign: 'center', flex: '1' }} onClick = {() => navigate(\"/\")}>ME100</h1>\n      <h2>Login</h2>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label htmlFor=\"username\">Username:</label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            style={{ width: '150px', height: '10px' }}\n            value={username}\n            onChange={(e) => setLoginData({ ...loginData, username: e.target.value })}\n          />\n        </div>\n        <div>\n          <label htmlFor=\"password\">Password:</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            style={{ width: '160px', height: '20px' }}\n            value={password}\n            onChange={(e) => setLoginData({ ...loginData, password: e.target.value })}\n          />\n        </div>\n        <button type=\"submit\" style = {{margin: 10}}>Login</button>\n      </form>\n\n      {loginStatus && (\n        <div className={loginStatus.data === 'succeed' ? 'success-message' : 'error-message'}>\n          {loginStatus.data === 'succeed' ? 'Login succeeded' : 'Login failed'}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":";;;;;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,OAAO,QAAQ,gBAAgB;AAExC,IAAMC,KAAK,GAAG,SAARA,KAAKA,CAAA,EAAS;EAClB;EAAA,IAAAC,QAAA,GAEgDF,OAAO,CAAC,CAAC;IAAjDG,eAAe,GAAAD,QAAA,CAAfC,eAAe;IAAEC,kBAAkB,GAAAF,QAAA,CAAlBE,kBAAkB;EAAA,IACrCC,WAAW,GAMf,SAAAA,YAAYC,MAAc,EAAEC,IAAS,EAAEC,WAAmB,EAAEC,KAAU,EAAE;IAAAC,eAAA,OAAAL,WAAA;IAAA,KALjEC,MAAM;IAAA,KACNC,IAAI;IAAA,KACJC,WAAW;IAAA,KACXC,KAAK;IAGR,IAAI,CAACH,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACC,KAAK,GAAGA,KAAK,CAAC,CAAC;EACtB,CAAC;;EAGL,IAAME,QAAQ,GAAGZ,WAAW,CAAC,CAAC;EAAC,IAAAa,SAAA,GAEOd,QAAQ,CAAc,CAAC;IAAAe,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAtDG,WAAW,GAAAF,UAAA;IAAEG,cAAc,GAAAH,UAAA;EAAA,IAAAI,UAAA,GAEAnB,QAAQ,CAAC;MACzCoB,QAAQ,EAAE,EAAE;MAAE;MACdC,QAAQ,EAAE,EAAE,CAAE;IAChB,CAAC,CAAC;IAAAC,UAAA,GAAAN,cAAA,CAAAG,UAAA;IAHKI,SAAS,GAAAD,UAAA;IAAEE,YAAY,GAAAF,UAAA;EAAA,IAKtBF,QAAQ,GAAeG,SAAS,CAAhCH,QAAQ;IAAEC,QAAQ,GAAKE,SAAS,CAAtBF,QAAQ;EAE1B,IAAMI,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,WAAmB,EAAK;IAC9C,IAAMC,cAAc,GAAG,IAAIC,IAAI,CAAC,CAAC;IACjCD,cAAc,CAACE,OAAO,CAACF,cAAc,CAACG,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;;IAEtDC,QAAQ,CAACC,MAAM,kBAAAC,MAAA,CAAkBP,WAAW,gBAAAO,MAAA,CAAaN,cAAc,CAACO,WAAW,CAAC,CAAC,aAAU;EACjG,CAAC;;EAED;EACA,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIC,CAAkC,EAAK;IAC3DA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAMC,KAAK,GAAG,6BAA6B;IAE3C,IAAMC,cAAc,GAAG;MACnBC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACrB,SAAS;IAChC,CAAC;;IAGD;IACFsB,KAAK,CAACP,KAAK,EAAEC,cAAc,CAAC,CAC3BO,IAAI,CAAC,UAACC,QAAQ,EAAK;MAChB,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;QAClB,MAAM,IAAIC,KAAK,CAAC,6BAA6B,CAAC;MAC9C;MACA,OAAOF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAC1B,CAAC,CAAC,CACDJ,IAAI,CAAC,UAACrC,IAAI,EAAK;MACZ;MACA,IAAMQ,WAAW,GAAG,IAAIV,WAAW,CACnCE,IAAI,CAACD,MAAM,EACXC,IAAI,CAACA,IAAI,EACTA,IAAI,CAACC,WAAW,EAChBD,IAAI,CAACE,KACL,CAAC;MACDO,cAAc,CAACD,WAAW,CAAC;MAC3B,IAAMkC,cAAc,GAAGpB,QAAQ,CAACC,MAAM,CACnCoB,KAAK,CAAC,IAAI,CAAC,CACXC,IAAI,CAAC,UAAAC,GAAG;QAAA,OAAIA,GAAG,CAACC,UAAU,CAAC,cAAc,CAAC;MAAA,EAAC;MAE9C,IAAI7B,WAAW;MACf,IAAIyB,cAAc,EAAE;QAClBzB,WAAW,GAAGyB,cAAc,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAC5C;MACA;MACA,IAAI1B,WAAW,IAAIT,WAAW,CAACR,IAAI,KAAK,SAAS,EAAE;QAC/CgB,cAAc,CAAC,OAAO,CAAC;QACvBnB,kBAAkB,CAAC,IAAI,CAAC;QACxBO,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;MAC5B;IACJ,CAAC,CAAC,CACD2C,KAAK,CAAC,UAAC7C,KAAK,EAAK;MACd;MACA8C,OAAO,CAAC9C,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;IACxC,CAAC,CAAC;;IAIF;EACF,CAAC;;EAID,oBACEZ,KAAA,CAAA2D,aAAA;IAAKC,SAAS,EAAC,iBAAiB;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9BnE,KAAA,CAAA2D,aAAA;IAAIS,KAAK,EAAE;MAAEC,SAAS,EAAE,QAAQ;MAAEC,IAAI,EAAE;IAAI,CAAE;IAACC,OAAO,EAAI,SAAAA,QAAA;MAAA,OAAMzD,QAAQ,CAAC,GAAG,CAAC;IAAA,CAAC;IAAA+C,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,OAAS,CAAC,eACzFnE,KAAA,CAAA2D,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,OAAS,CAAC,eACdnE,KAAA,CAAA2D,aAAA;IAAMa,QAAQ,EAAEpC,YAAa;IAAAyB,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC3BnE,KAAA,CAAA2D,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACEnE,KAAA,CAAA2D,aAAA;IAAOc,OAAO,EAAC,UAAU;IAAAZ,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,WAAgB,CAAC,eAC3CnE,KAAA,CAAA2D,aAAA;IACEe,IAAI,EAAC,MAAM;IACXC,EAAE,EAAC,UAAU;IACbP,KAAK,EAAE;MAAEQ,KAAK,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAO,CAAE;IAC1CC,KAAK,EAAEzD,QAAS;IAChB0D,QAAQ,EAAE,SAAAA,SAAC1C,CAAC;MAAA,OAAKZ,YAAY,CAAAuD,aAAA,KAAMxD,SAAS;QAAEH,QAAQ,EAAEgB,CAAC,CAAC4C,MAAM,CAACH;MAAK,EAAE,CAAC;IAAA,CAAC;IAAAjB,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC3E,CACE,CAAC,eACNnE,KAAA,CAAA2D,aAAA;IAAAE,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACEnE,KAAA,CAAA2D,aAAA;IAAOc,OAAO,EAAC,UAAU;IAAAZ,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,WAAgB,CAAC,eAC3CnE,KAAA,CAAA2D,aAAA;IACEe,IAAI,EAAC,UAAU;IACfC,EAAE,EAAC,UAAU;IACbP,KAAK,EAAE;MAAEQ,KAAK,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAO,CAAE;IAC1CC,KAAK,EAAExD,QAAS;IAChByD,QAAQ,EAAE,SAAAA,SAAC1C,CAAC;MAAA,OAAKZ,YAAY,CAAAuD,aAAA,KAAMxD,SAAS;QAAEF,QAAQ,EAAEe,CAAC,CAAC4C,MAAM,CAACH;MAAK,EAAE,CAAC;IAAA,CAAC;IAAAjB,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAC3E,CACE,CAAC,eACNnE,KAAA,CAAA2D,aAAA;IAAQe,IAAI,EAAC,QAAQ;IAACN,KAAK,EAAI;MAACc,MAAM,EAAE;IAAE,CAAE;IAAArB,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,OAAa,CACtD,CAAC,EAENjD,WAAW,iBACVlB,KAAA,CAAA2D,aAAA;IAAKC,SAAS,EAAE1C,WAAW,CAACR,IAAI,KAAK,SAAS,GAAG,iBAAiB,GAAG,eAAgB;IAAAmD,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAClFjD,WAAW,CAACR,IAAI,KAAK,SAAS,GAAG,iBAAiB,GAAG,cACnD,CAEJ,CAAC;AAEV,CAAC;AAED,eAAeN,KAAK"},"metadata":{},"sourceType":"module"}